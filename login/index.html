<script src="/innate-config.js"></script>
<h1>Log In</h1>
<input id="user" placeholder="Username">
<input id="password" placeholder="Password">
<button onclick="login();">Log In</button>
<style>
  #user, #password{
    border: 2px solid black;
    color: black;
    border-radius: 1vh;
    font-size: 3vh;
  }
  ::placeholder{
    color:gray;
  }
  body{ 
    width:100%;
    height:100%;
    overflow:hidden; 
    display:flex;
    flex-direction:column; 
    align-items:center; 
    justify-content:center;
    background:white;
  }
  button{
    margin: 3vh;
    border-radius: 0px;
    color: black;
    background: transparent;
    font-size: 2.4vh;
  }
</style>
<script defer>
  function getText(file){
    return new Promise((resolve) => {
      fetch(file)
        .then((response) => {
          return response.text();
        })
        .then((txt) => {
          resolve(txt.trim());
        });
    });
  }
  async function login(){
    var user=document.getElementById("user").value;
    var password=document.getElementById("password").value;
    var reply=await getText(localStorage.getItem("server")+"user.php/?val=r&user="+user+"&password="+password);
    if (reply=="Failure"){
      alert("Invalid password or username!");
    } else {
      localStorage.setItem("password",password);
      localStorage.setItem("username",user);
      window.location.href="/";
    }
  }
</script>

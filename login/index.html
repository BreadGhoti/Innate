<script src="/innate-config.js"></script>
<b>Username: </b><input id="user">
<b>Password: </b><input id="password">
<button onclick="login();">Log In</button>
<style>
  #user, #password{
    border:2px solid black;
    color:black;
  }
  
  body{ width:100%;
       height:100%;
       overflow:hidden; 
       display:flex;
       flex-direction:column; 
       align-items:center; 
       justify-content:center;
       button{
         margin: 10px; 
       }
       
       background:#c4c4c4;
  }
</style>
<script>
  function getText(file){
    return new Promise((resolve) => {
      fetch(file)
        .then((response) => {
          return response.text();
        })
        .then((txt) => {
          resolve(txt.trim());
        });
    });
  }
  async function login(){
    await updateServer();
    var user=document.getElementById("user").value;
    var password=document.getElementById("password").value;
    var reply=await getText(innate.server+"user.php/?val=r&user="+user+"&password="+password);
    if (reply=="Failure"){
      alert("Invalid password or username!");
    } else {
      localStorage.setItem("password",password);
      localStorage.setItem("username",user);
      window.location.href="/";
    }
  }
</script>

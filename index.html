<div id="messages"></div>
<script>
  window.addEventListener("error", handleError, true);

  function handleError(evt) {
      if (evt.message) { // Chrome sometimes provides this
        alert("error: "+evt.message +" at linenumber: "+evt.lineno+" of file: "+evt.filename);
      } else {
        alert("error: "+evt.type+" from element: "+(evt.srcElement || evt.target));
      }
  }
  
  function getHtml(file){
    return new Promise((resolve) => {
      fetch(file)
        .then((response) => {
          return response.text();
        })
        .then((html) => {
          resolve(html);
        });
    });
  }

  async function start(){
    var users=await getHtml("https://server.mydiscussion.net/users.txt");
    var userjson={};
    var userlines = users.toString().split('\n');
    for(var i=0;i<userlines.length;i++){
        userjson.push(lines[i]);
    }
    alert(userjson);
  }
  start();
</script>

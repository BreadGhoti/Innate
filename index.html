<div id="messages"></div>
<script>
  function getText(file){
    return new Promise((resolve) => {
      var request = new XMLHttpRequest();
      try {
        request.open("GET", file);
      
        request.responseType = "text";
      
        request.addEventListener("load", () => {
          setTimeout(()=>{
            resolve(request.response);
          },50);
        });
        request.addEventListener("error", () => {
          console.error("XHR error");
        });
      
        request.send();
      } catch (error) {
        console.error(`XHR error ${request.status}`);
      }
    });
  }

  async function start(){
    
    var messages=await getText("https://actual-wildebeest-dragon731012.koyeb.app/index.php/?val=r&group=hi");
    alert(messages);
    var userlines=messages.toString().split("|");
    var userjson={};
    for(var i=0;i<userlines.length;i++){
        userjson.push(userlines[i]);
    }
    alert(userjson);
  }
  start();
</script>

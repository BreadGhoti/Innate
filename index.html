<div id="messages"></div> 
<script>
  function getText(file){
    return new Promise((resolve) => {
      fetch(file)
        .then((response) => {
          return response.text();
        })
        .then((txt) => {
          resolve(txt);
        });
    });
  }

  async function start(){
    
    var messages=await getText("https://actual-wildebeest-dragon731012.koyeb.app/index.php/?val=r&group=hi");
    var messagelines=messages.toString().split("|");
    alert(messagelines.length);
    var messagejson={messages: []};
    for(var i=0;i<messagelines.length-1;i++){
      var tempjson={};
      tempjson.user=messagelines[i].split(":")[0];
      tempjson.message=messagelines[i].split(":")[0];
      messagejson.messages.push(tempjson);
    }
    alert(JSON.stringify(messagejson));
  }
  start();
</script>

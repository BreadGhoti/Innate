<div id="groups"></div>
<style>
  #groups{
    width:100%;
    height:90%;
    position:absolute;
    left:0px;
    bottom:0px;
    overflow:scroll;
  }
  .groupbox{
    border-top:3px solid black;
    border-bottom:3px solid black;
    width:100%;
    padding-top:5px;
    padding-bottom:5px;
  }
  .groupbutton{
    background-color:blue;
    color:black;
    border:0px;
    border-radius:27px;
    float:right;
  }
</style>
<script>
  var clientuser=localStorage.getItem("username");
  var clientpassword=localStorage.getItem("password");

  if (clientuser==undefined || clientuser==null){
    window.location.href="/signup";
  }
  
  function getText(file){
    return new Promise((resolve) => {
      fetch(file)
        .then((response) => {
          return response.text();
        })
        .then((txt) => {
          resolve(txt);
        });
    });
  }
  async function start(){
    groups=await getText("https://server-dragon731012.koyeb.app/group.php?val=r");
    var grouplines=groups.toString().split("|");
    var groupjson={groups: []};
    for(var i=0;i<grouplines.length-1;i++){
      var tempjson={};
      tempjson.name=grouplines[i];
      groupjson.groups.push(tempjson);
    }
    
    for (var i=0;i<groupjson.groups.length;i++){
      var groupdiv=document.createElement("div");
      groupdiv.className="groupbox";

        groupdiv.innerHTML="<div class='grouptext'>"+groupjson.groups[i].name+"</div><button class='groupbutton' id='"+groupjson.groups[i].name+"'>Join</button>";
      document.getElementById("groups").appendChild(groupdiv);
    }
  }
  start();
</script>
